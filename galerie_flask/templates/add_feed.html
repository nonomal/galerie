{% extends 'base.html' %}

{% block title %}{{ _('Add feed | Galerie') }}{% endblock %}

{% block content %}
<div class="stream">
    <div class="header">
        <p>{{ _('Add feed') }}</p>
        <a href="/">{{ _('Back to homepage') }}</a>
    </div>
    {% if error %}
    <p>{{ error }}</p>
    {% else %}  
    <form>
        <p>
            {% if twitter_handle %}
            {{ _('Twitter feed') }}
            <input
                type="text"
                name="twitter_handle"
                required
                value="@{{ twitter_handle }}"
                readonly
            >
            {% elif url %}
            {{ _('Feed URL') }} 
            <input
                type="text"
                name="url"
                required
                value="{{ url }}"
                readonly
            >
            {% else %}
            {{ _('Feed URL') }} 
            <input
                type="text"
                name="url"
                required
            >
            {% endif %}
        </p>
        <p>
            {{ _('Group') }}
            <select name="group">
                {% for g in groups %}
                <option value="{{ g.gid }}">{{ g.title }}</option>
                {% endfor %}
            </select>
        </p>
        <button
            class="button"
            hx-post="/actions/add_feed"
            hx-swap="none"
            hx-disabled-elt="this"
        >
            {{ _('Confirm') }} <span class="htmx-indicator">...</span>
        </button>
    </form>
    {% endif %}
</div>
{% endblock %}
